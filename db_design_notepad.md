# Προτεινόμενο Βιβλίο

- Θεμελειώδεις Aρχές Bάσεων Δεδομένων Elmasri & s.b. Navathe 7η εκδοση Εκδοσεις Διαυλος

Γενικά ένα database { Database -> Tablespace -> Segment -> Extent -> Block (-> περιέχει)

Page:
| Block | Block | Block |

## Λογική οργάνωση

- **Extent** είναι ένα σύνολο απο συνεχόμενα blocks
- **Segment** είναι ένα σύνολο από extnet που αντιστοιχούν σε μια λογική οντότητα.

### Δομή του block

> Το block είναι η μικροότερη μονάδα Ι/Ο της βδ

**Κάθε block έχει:**

- Header : σε τι segment βρίσκεται το block
- Table dir : ποιος πίνακας έχει εγγραφές στο block
- Row dir : οι δ/σεις των εγγραφών στο block
- Row data : οι εγγγραφές

> Μας ενδιαφέρει να ξέρουμε πόσα μπλοκ θέλουμε να φέρουμε από την μνήμη, όσο το λιγότερο τόσο το καλύτερο (query optimization) <- πολυπλοκότητα

## Πόσες εγγραφές χωράνε σε ένα block

1024/100=10 εγγραφες με στρογγυλοποιηση  

Αρχειο 10^5 block 100.000/10

> Με τον εναπομείνοντα χώρο, μπορώ να το κάνω span και απλά να χρησιμοποιήσω τον ελεύθερο χώρο από δύο spans στο τέλος γεμάτων block.

## Εκτεινόμενη (span)

10^5 εγγραφες * 100bytes η  κάθε μια = 10^7bytes  

10^7/1024 = 9990 blocks

## Μη εκτεινόμενη

1024/100 = 10 εγγραφες σε κάθε block

10^5/10 10000 blocks

Βασικές πράξεις  

- **Open**: το αρχείο, δεσμεύει ενδιάμεση μνήμη, ανακτά την επικεφαλίδα του αρχέιου, βάζει τον δείκτη στην αρχή του αρχείου

- **Reset**: τον pointer στην αρχή του αρχείου

- **Find/locate**:

- **Read/get**

- **Delete**

- **Modify**

- **Insert**

- **Close**

  - Άλλες πράξεις

    - Scan

    - Find all

    - Find n

    - Find ordered

    - Reorganize

Η οργάνωση των αρχείων είναι στενά συνδεδεμένη με τις πράξεις που αναμένουμε ότι θα γίνονται συχνά

> Αν σαρώσω για id=10 πχ μπορώ να το βρω και να σταματήσω στο πρώτο block, κάπου στην μέση, ή στο τέλος, δηλαδή Ν, άρα πολυπλοκότητα O(N/2).  
> Αν σαρώνω για salary =100, τότε θα πρέπει να περάσω από όλα, γιατί δεν είναι μοναδική τιμή. Άρα Ο(Ν).  

## Αρχεία Διατεταγμένων εγγραφών ½  

- Πεδίο διάταξης: οι τιμες των εγγραφών στο πεδίο αυτό καθορίζουν τη διάταξή τους στο αρχείο  

- Κλειδί διαάταξης: το πεδίο διάταξης είναι το πεδίο κλειδί

- Αποτελεσματική ανάγνωση εγγραφών με διάταξη των τιμών του πεδίου διάταξης

- Αποτελεσματική ανάγνωση επίμενης εγγραφής στο πείο διάταξης: είναι το ίδιο (ή το επόμενο block)

- Αποτελεσματική αναζήτηση στην τιμή του κλειδιού διάταξης" -> δυαδική αναζήτηση

### Δυαδική αναζήτηση

Block | Θέλω αυτό το block | Block

Ανακτώ ή το αριστερά ή το δεξιά

Στην πρώτη αναήτηση απορρίπτω τα μισά, στην επόμενη πάλι το ιδιο κλπ

Άρα αν είχα 1024 block, τότε θα είναι Log2(1024)=10

Κόστος αναζήτησης log2 N+μ (μ είναι το επόμενο πχ από αυτό που ψάχνω αμα έχω μισθούς 1000 και βρώ έναν τότε παίζει να είναι και ο επόμενος σε μια ταξινομημένη βάση)
